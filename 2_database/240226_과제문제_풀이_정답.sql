CREATE TABLE TB_PUBLISHER(
    PUB_NO NUMBER CONSTRAINT PUBLISHER_PK PRIMARY KEY,
    PUB_NAME VARCHAR(50) CONSTRAINT PUBLISHER_NN NOT NULL,
    PHONE VARCHAR(13) 
);

INSERT INTO TB_PUBLISHER VALUES(1,'KH1','010-1234-5678');
INSERT INTO TB_PUBLISHER VALUES(2,'KH2','010-4444-5678');
INSERT INTO TB_PUBLISHER VALUES(3,'KH3','010-1333-5555');

SELECT * FROM TB_PUBLISHER;


-----------------------
CREATE TABLE TB_BOOK(
 BK_NO NUMBER CONSTRAINT BOOK_PK PRIMARY KEY,
 BK_TITLE VARCHAR2(30) CONSTRAINT BOOK_NN_TITLE NOT NULL,
 BK_AUTHOR VARCHAR2(20) CONSTRAINT BOOK_NN_AUTHOR NOT NULL,
 BK_PRICE NUMBER,
 BK_PUB_NO NUMBER, 
 CONSTRAINT BOOK_FK FOREIGN KEY (BK_PUB_NO) REFERENCES TB_PUBLISHER(PUB_NO) 
 ON DELETE CASCADE
);
--DROP TABLE TB_BOOK;
INSERT INTO TB_BOOK VALUES(100, '자바정복기','최G1',1000000, 1);
INSERT INTO TB_BOOK VALUES(101, '자바정복기1','최G1',1000000, 2);
INSERT INTO TB_BOOK VALUES(102, '자바정복기2','최G1',2000000, 2);
INSERT INTO TB_BOOK VALUES(103, '자바정복기3','최G1',3000000, 2);
INSERT INTO TB_BOOK VALUES(104, '자바정복기4','최G1',4000000, 3);

SELECT * FROM TB_BOOK;

CREATE TABLE TB_MEMBER(
    MEMBER_NO NUMBER CONSTRAINT MEMBER_PK PRIMARY KEY,
    MEMBER_ID VARCHAR2(20)CONSTRAINT MEMBER_UQ_ID UNIQUE NOT NULL,
    MEMBER_PWD VARCHAR2(20)CONSTRAINT MEMBER_NN_PWD NOT NULL,
    MEMBER_NAME  VARCHAR2(15)CONSTRAINT MEMBER_NN_NAME NOT NULL,
    GENDER CHAR(1)CONSTRAINT MEMBER_CK_GEN CHECK (GENDER IN ('M','F')),
    ADDRESS VARCHAR2(50),
    PHONE CHAR(13),
    STATUS CHAR(1) DEFAULT 'N' CONSTRAINT MEMBER_CK_STA CHECK(STATUS IN ('N','Y')),
    ENROLL_DATE DATE DEFAULT SYSDATE CONSTRAINT MEMBER_NN_EN NOT NULL
);


DROP TABLE TB_MEMBER;
INSERT INTO TB_MEMBER VALUES(200,'USER01','PASS01','최G1','M',NULL,NULL,DEFAULT,DEFAULT);
INSERT INTO TB_MEMBER VALUES(201,'USER02','PASS01','최G2','M',NULL,NULL,DEFAULT,DEFAULT);
INSERT INTO TB_MEMBER VALUES(202,'USER03','PASS01','최G3','M',NULL,NULL,DEFAULT,DEFAULT);
INSERT INTO TB_MEMBER VALUES(203,'USER04','PASS01','최G4','M',NULL,NULL,DEFAULT,DEFAULT);
INSERT INTO TB_MEMBER VALUES(204,'USER05','PASS01','최G5','M',NULL,NULL,DEFAULT,DEFAULT);

SELECT * FROM TB_MEMBER;

CREATE TABLE TB_RENT(
    RENT_MEM_NO NUMBER CONSTRAINT RENT_PK PRIMARY KEY,
    RENT_BOOK_NO NUMBER,
    RENT_DATE DATE DEFAULT SYSDATE,
    CONSTRAINT RENT_FK_MEM FOREIGN KEY(RENT_MEM_NO) REFERENCES TB_MEMBER ON DELETE SET NULL,
     CONSTRAINT RENT_FK_BOOK FOREIGN KEY(RENT_BOOK_NO) REFERENCES TB_BOOK ON DELETE SET NULL
);
DROP TABLE TB_RENT;

INSERT INTO TB_RENT VALUES(200,100,DEFAULT);
INSERT INTO TB_RENT VALUES(201,101,DEFAULT);
INSERT INTO TB_RENT VALUES(202,102,DEFAULT);

SELECT * FROM TB_RENT;